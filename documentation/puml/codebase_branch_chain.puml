@startuml
start
:Codebase Branch CR;
:Check Parent Codebase;
if (Check CI tool) then (Jenkins)
    #lightblue: Check Jenkins Folder;
    if (Check new version/ is spec.version in "version history" status) then (no)
        if (EDP Versioning) then (yes)
            #lightblue:Reset Jenkins Build Count;
            #lightblue:Reset Jenkins Last Successful Build;
            :Add spec.version to "version history" status;
        else (no)
        endif
    else (yes)
    endif
    #lightblue: Trigger Jenkins Release Job;
else (GitlabCI)
     #lightgreen:Reset GitlabCI Build Count;
     #lightgreen:Create branch in GIT repository;
     :Create CodebaseImageStream in cluster;
     #lightgrey:Clean temp directory in pod;
endif
stop

legend
|= |= Component |
|<back:#lightyellow>   </back>| Codebase |
|<back:#lightblue>   </back>| Jenkins |
|<back:#lightgreen>   </back>| GitlabCI |
|<back:#lightgrey>   </back>| Technical  |
endlegend
@enduml